language: node_js

sudo: false

node_js:
  - "6"

before_script:
  - if ! [ -x "$(command -v aws)" ]; then curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip" ; unzip awscliv2.zip ; sudo ./aws/install ; fi
  - AWS_ACCESS_KEY_ID=${node_pre_gyp_accessKeyId} AWS_SECRET_ACCESS_KEY=${node_pre_gyp_secretAccessKey} aws sts get-caller-identity

# uploads to: https://codecov.io/gh/mapbox/tilelive-s3
after_success:
  - npm run upload-coverage
